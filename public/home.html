<script type="application/json" id="page-metadata">
    {
        "title": "Portfolio - TripleDesign",
        "description": "Bekijk onze projecten en ontdek hoe TripleDesign innovatieve 3D-oplossingen toepast in diverse sectoren. Van 3D visualisaties tot virtual reality en interactieve installaties."
    }
</script>

<div class="container mx-auto p-0">

    <div class="row m-0 p-0">
        <div style="height: auto; height: 200px;" class="col-lg-6 align-self-lg-center m-0 p-3">
            <h1 class="headertext text-black text-decoration-none m-0 p-0">
                <span class="typewrite" data-period="2000"
                    data-type='["We staan te popelen om jouw project in onze 3D-showcase te laten schitteren!"]'
                    data-highlight-words='["jouw project", "laten schitteren!"]'></span>
            </h1>
        </div>
        <div class="col-lg-6 m-0 p-0">
            <div class="card bg-transparent rounded-0 border border-0">
                <img src="img/header/closeup-hand-holding-touching-screen-blank-screen-smartphone-removebg-preview.png"
                    class="card-img" alt="mobiele telefoon">
                <div class="card-img-overlay d-flex justify-content-center align-items-center">
                    <model-viewer style="border: 2px solid black; height: 85%; width: 26%;" loading="eager"
                        camera-controls disable-pan disable-zoom touch-action="pan-y" auto-rotate alt="bril"
                        src="gltf/portfolio/portfolio.gltf" shadow-intensity="1" camera-controls
                        touch-action="pan-y"></model-viewer>
                </div>
            </div>
        </div>
    </div>

    <div class="row bg-black text-light shadow mx-3 mt-0 mb-3 p-3">
        <div class="row m-0 p-3">
            <h1 class="mb-4">Een greep uit onze projecten</h1>
            <h2>Bij <strong>TripleDesign</strong> werken we met plezier en toewijding aan diverse projecten binnen
                verschillende categorieën. Hieronder vindt u een selectie van ons werk:</h2>
        </div>
        <div class="row m-0 p-3">
            <div class="col-sm-6 col-lg-4 mb-3">
                <h2>3D visuals</h2>
                <h3>Onze 3D visualisaties helpen ideeën omzetten in realistische beelden. Of het nu gaat om
                    architectuur, producten of artistieke concepten, we streven naar visuals die helder en overtuigend
                    zijn.</h3>
            </div>
            <div class="col-sm-6 col-lg-4 mb-3">
                <h2>3D productconfiguratoren</h2>
                <h3>We ontwikkelen 3D productconfiguratoren die gebruikers de mogelijkheid bieden om producten naar wens
                    aan te passen. Deze tools maken het eenvoudig om verschillende opties en varianten direct te zien.
                </h3>
            </div>
            <div class="col-sm-6 col-lg-4 mb-3">
                <h2>Websites met 3D integratie</h2>
                <h3>Onze websites met 3D-elementen bieden een interactieve en boeiende ervaring. Van
                    productdemonstraties tot andere interactieve onderdelen, wij maken van elke website een unieke
                    beleving.</h3>
            </div>
            <div class="col-sm-6 col-lg-4 mb-3">
                <h2>Virtual reality</h2>
                <h3>We creëren virtual reality-ervaringen voor verschillende toepassingen, zoals training, simulatie en
                    entertainment. Onze VR-projecten bieden gebruikers een meeslepende ervaring.</h3>
            </div>
            <div class="col-sm-6 col-lg-4 mb-3">
                <h2>Interactieve installaties</h2>
                <h3>Onze interactieve installaties zijn ontworpen om te verrassen en te boeien. Ze zijn ideaal voor
                    tentoonstellingen, evenementen en marketingcampagnes en zorgen voor een interactieve ervaring.</h3>
            </div>

            <div class="row row-cols-auto">
                <div class="col-12 mb-3">
                    <h2>Filter categorieën:</h2>
                </div>

                <div class="col mb-3">
                    <button class="btn btn-light rounded-0 filter-button fw-bold fs-6 text-uppercase"
                        data-filter="all">alle projecten</button>
                </div>

                <div class="col mb-3">
                    <button class="btn btn-danger rounded-0 filter-button fw-bold fs-6 text-uppercase"
                        data-filter="woningbouw">woningbouw</button>
                </div>
                <div class="col mb-3">
                    <button class="btn btn-success rounded-0 filter-button fw-bold fs-6 text-uppercase"
                        data-filter="utiliteitsbouw">utiliteitsbouw</button>
                </div>
           
            </div>
        </div>
    </div>
</div>

<div class="container mx-auto pb-1 pb-md-3 p-0">

    <div class="row m-0 p-0">

        <div class="col-xl-4 col-lg-6 col-md-6 col-sm-12 my-0 p-3 pb-1 pb-md-3 p-0 case-item" data-category="virtuals">
            <div class="card border-0 h-100 shadow z-0 rounded-0">
                <div style="width: 110px;"
                    class="bg-primary text-white position-absolute top-0 end-0 shadow z-1 me-3 text-center d-flex align-items-center justify-content-center m-0 py-2">
                    <h4 class="m-0">virtual reality</h4>
                </div>
                <div id="cesiumContainer" style="width: 100%; aspect-ratio: 1 / 1; display: none;"
                    class="position-absolute top-0 start-0">
                </div>
                <img src="content/portfolio/ar-voor-gebouwen/2023-074.png" class="img-fluid rounded-0" alt="ar-gebouw">
                <div class="card-body bg-black text-light">

                    <button id="arButton" class="btn btn-light border-0 rounded-0 me-3" type="button"
                        onclick="startAR()">
                        <i class="bi-pin-map"></i> bekijk in AR
                    </button>
                    <button class="btn btn-light border-0 rounded-0" type="button" onclick="portfolioCesium()">
                        <i class="bi bi-map"></i> bekijk op Google Earth
                    </button>
                    <h2 class="m-0 p-0 py-2">AR voor gebouwen</h2>
                    <h3>We onderzoeken de mogelijkheden om gebouwen in Augmented Reality (AR) weer te geven. Het doel?
                        Gebouwen op de juiste locatie virtueel plaatsen, zodat je ze eenvoudig met je telefoon kunt
                        bekijken en ervaren.</h3>
                </div>
            </div>
        </div>

        <script>
            const targetLatitude = 52.043026037779555;
            const targetLongitude = 5.56421522902635;
            const accuracyThreshold = 170;

            function startAR() {
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(position => {
                        const userLat = position.coords.latitude;
                        const userLng = position.coords.longitude;
                        const distance = getDistanceFromLatLonInMeters(userLat, userLng, targetLatitude, targetLongitude);

                        if (distance < accuracyThreshold) {
                            alert("Je bent op de juiste locatie! AR wordt geladen.");

                            const isIOS = /iPhone|iPad|iPod/.test(navigator.userAgent);
                            const isAndroid = /Android/.test(navigator.userAgent);

                            if (isIOS) {
                                window.location.href = "https://tripledesign.nl/content/portfolio/ar-voor-gebouwen/2023-074.usdz";
                            } else if (isAndroid) {
                                window.location.href = "intent://arvr.google.com/scene-viewer/1.0?file=https://tripledesign.nl/content/portfolio/ar-voor-gebouwen/2023-074.glb#Intent;scheme=https;package=com.google.ar.core;end;";
                            } else {
                                alert("AR wordt niet ondersteund op jouw apparaat.");
                            }
                        } else {
                            alert("Je moet dichter bij de locatie zijn om AR te bekijken.");
                        }
                    }, error => {
                        console.error("Geolocatie fout:", error);
                        alert("Kan je locatie niet ophalen. Controleer je GPS-instellingen.");
                    });
                } else {
                    alert("Je browser ondersteunt geen geolocatie.");
                }
            }

            function getDistanceFromLatLonInMeters(lat1, lon1, lat2, lon2) {
                const R = 6371000; // Straal van de aarde in meter
                const dLat = (lat2 - lat1) * (Math.PI / 180);
                const dLon = (lon2 - lon1) * (Math.PI / 180);
                const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +
                    Math.cos(lat1 * (Math.PI / 180)) * Math.cos(lat2 * (Math.PI / 180)) *
                    Math.sin(dLon / 2) * Math.sin(dLon / 2);
                const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
                return R * c;
            }

            // Locatie controleren bij laden
            console.log('onload');
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(position => {
                    const userLat = position.coords.latitude;
                    const userLng = position.coords.longitude;
                    const distance = getDistanceFromLatLonInMeters(userLat, userLng, targetLatitude, targetLongitude);

                    if (distance < accuracyThreshold) {
                        document.getElementById("arButton").style.display = "inline-block";
                    }
                }, error => {
                    console.error("Geolocatie fout:", error);
                    alert("Kan je locatie niet ophalen. Controleer je GPS-instellingen.");
                });
            }
        </script>

    </div>
</div>

<script type="module">
    Cesium.Ion.defaultAccessToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI1N2JiYzYyMy00ZWVkLTQ0NjAtYTBjYy02ZTc2ZGM3ZmZhMjEiLCJpZCI6MjYzMDc4LCJpYXQiOjE3MzQ0MzU1NDR9.oLuQXjZgSIzLJ0wbwoU_LbwNNyWmoWDWguOjYiEPmBs';

    async function initializeViewer() {
        const viewer = new Cesium.Viewer('cesiumContainer', {
            terrain: Cesium.Terrain.fromWorldTerrain(),
            imageryProviderViewModels: [],  // Verwijdert basemaps zoals Bing en imagery
            selectionIndicator: false,     // Verbergt de objectselectie indicator
            navigationHelpButton: false,   // Verbergt de navigatiehulp knop
            sceneModePicker: false,        // Verbergt de scene-mode (2D, 3D, Columbus view) knop
            timeline: false,               // Verbergt de tijdlijn
            fullscreenButton: false,       // Verbergt de fullscreen knop
            homeButton: false,             // Verbergt de "home" knop
            infoBox: false,                // Verbergt het infoBox
            geocoder: false,               // Verbergt de geocoder (zoeken)
            navigationInstructionsInitiallyVisible: false,  // Verbergt de navigatie-instructies
            //clockViewModel: false,         // Verbergt de klok viewmodel (play/pause knoppen)
            animation: false,              // Verbergt de animatie knop
        });

        // Enable rendering the sky
        viewer.scene.skyAtmosphere.show = true;

        viewer.camera.setView({
            destination: Cesium.Cartesian3.fromDegrees(5.56455, 52.04310, 60), // Jouw locatie met hoogte 150 meter
            orientation: {
                heading: Cesium.Math.toRadians(230),  // Kijk in oostelijke richting (90 graden)
                pitch: Cesium.Math.toRadians(-20),  // Lichte neerwaartse helling (pitch)
                roll: 0,                            // Geen rotatie (roll)
            }
        });

        viewer.camera.moveBackward(120);

        // Configure Ambient Occlusion
        if (Cesium.PostProcessStageLibrary.isAmbientOcclusionSupported(viewer.scene)) {
            const ambientOcclusion = viewer.scene.postProcessStages.ambientOcclusion;
            ambientOcclusion.enabled = true;
            ambientOcclusion.uniforms.intensity = 2.0;
            ambientOcclusion.uniforms.bias = 0.1;
            ambientOcclusion.uniforms.lengthCap = 0.5;
            ambientOcclusion.uniforms.directionCount = 16;
            ambientOcclusion.uniforms.stepCount = 32;
        }

        try {
            // 3D Tileset toevoegen (vervang door je eigen ID als je een ander tileset wilt gebruiken)
            const googleTileset = await Cesium.Cesium3DTileset.fromIonAssetId(2275207);
            viewer.scene.primitives.add(googleTileset);
        } catch (error) {
            console.error('Fout bij het laden van de tileset:', error);
        }

        const position = Cesium.Cartesian3.fromDegrees(5.56455, 52.04310, 50.5);
        const heading = Cesium.Math.toRadians(96);
        const pitch = Cesium.Math.toRadians(0);
        const roll = Cesium.Math.toRadians(0);
        const hpr = new Cesium.HeadingPitchRoll(heading, pitch, roll);
        const orientation = Cesium.Transforms.headingPitchRollQuaternion(position, hpr);

        viewer.entities.add({
            name: "2023-074",
            position: position,
            orientation: orientation,
            model: {
                uri: "https://tripledesign.nl/content/portfolio/ar-voor-gebouwen/2023-074.glb",
                scale: 1,
            }
        });
    }

    // De async functie aanroepen
    initializeViewer();
</script>


<script>
    // Filter functie
    document.querySelectorAll('.filter-button').forEach(button => {
        button.addEventListener('click', () => {
            const filter = button.getAttribute('data-filter');
            document.querySelectorAll('.case-item').forEach(item => {
                if (filter === 'all' || item.getAttribute('data-category') === filter) {
                    item.style.display = 'block';
                } else {
                    item.style.display = 'none';
                }
            });
        });
    });

    (function () {
        const carousels = document.querySelectorAll('.carousel');
        carousels.forEach(carousel => {
            const bootstrapCarousel = new bootstrap.Carousel(carousel, {
                interval: 3000,
                ride: 'carousel'
            });

            const buttons = carousel.closest('.card').querySelectorAll('.btn-group button');

            // Luister naar het 'slide' event van de carousel
            carousel.addEventListener('slide.bs.carousel', function (event) {
                buttons.forEach(button => {
                    button.classList.remove('active-button');
                });

                const activeIndex = event.to;
                if (buttons[activeIndex]) {
                    buttons[activeIndex].classList.add('active-button');
                }
            });

            // Activeer de eerste knop bij het starten van de carousel
            if (buttons.length > 0) {
                buttons[0].classList.add('active-button');
            }
        });
    })();

    function portfolioCesium() {
        var cesiumContainer = document.getElementById("cesiumContainer");
        if (cesiumContainer) {
            cesiumContainer.style.display = "block"; // Zorgt ervoor dat de container zichtbaar wordt
        } else {
            console.error("Cesium-container niet gevonden!");
        }

        if (!cesiumContainer) {
            console.error("CesiumContainer niet gevonden!");
            return;
        }

        // Maak een wrapper div om de originele plek van Cesium te bewaren
        const placeholder = document.createElement("div");
        placeholder.id = "cesium-placeholder";
        cesiumContainer.parentNode.insertBefore(placeholder, cesiumContainer);

        // Modal HTML
        const modalHtml = `
        <style>
            .modal-body {
                display: flex;
                justify-content: center;
                align-items: center;
                height: 100vh;
                overflow: hidden;
                background: black;
            }
            #modal-cesium-container {
                width: 100%;
                height: 100%;
            }
        </style>
        <div class="modal fade" id="cesium-modal" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog modal-fullscreen p-0 p-md-3 m-0">
                <div class="modal-content bg-white shadow">
                    <div class="modal-body m-0 p-0 overflow-hidden">
                        <div class="position-absolute top-0 z-3 m-0 p-0 ${/iPhone|Android/i.test(navigator.userAgent) ? 'start-0' : 'end-0'}">
                            <button class="rounded-0" type="button" 
                                    style="width: 100px; height: 100px; background-color: #fff; color: #000; font-size: 60px; border: 1px solid #fff;" 
                                    data-bs-dismiss="modal" aria-label="Close">
                                <i class="${/iPhone|Android/i.test(navigator.userAgent) ? 'bi-chevron-left' : 'bi-x'}"></i>
                            </button>
                        </div>
                        <div id="modal-cesium-container"></div>
                    </div>
                </div>
            </div>
        </div>
    `;

        // Voeg modal toe aan body
        document.body.insertAdjacentHTML('beforeend', modalHtml);

        // Verplaats CesiumContainer naar modal
        document.getElementById("modal-cesium-container").appendChild(cesiumContainer);

        // Open de modal
        const cesiumModal = new bootstrap.Modal(document.getElementById('cesium-modal'), {
            backdrop: 'static',
            keyboard: false,
            focus: true
        });
        cesiumModal.show();

        // Wanneer de modal sluit, verplaats de CesiumContainer terug
        const modalElement = document.getElementById('cesium-modal');
        modalElement.addEventListener('hidden.bs.modal', function () {
            placeholder.parentNode.replaceChild(cesiumContainer, placeholder); // Zet het terug op originele plek
            modalElement.remove(); // Verwijder modal uit DOM
        });
    }


    // Functie voor het tonen van een video in een modal
    function portfolioVideo(srcUrl) {
        const modalHtml = `
        <style>
            .modal-body {
                display: flex;
                justify-content: center;
                align-items: center;
                height: 100vh;
                overflow: hidden;
            }
            #video-src {
                width: 100%;
                max-height: 100%;
                display: block;
                margin: auto;
            }
        </style>
        <div class="modal fade" id="video-modal" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog modal-fullscreen p-0 p-md-3 m-0">
                <div class="modal-content bg-white shadow">
                    <div class="modal-body m-0 p-0 overflow-hidden">
                        <div class="position-absolute top-0 z-3 m-0 p-0 ${/iPhone|Android/i.test(navigator.userAgent) ? 'start-0' : 'end-0'}">
                            <button class="rounded-0 " type="button" style="width: 100px; height: 100px; background-color: #fff; color: #000; font-size: 60px; border: 1px solid #fff;" 
                                    class="btn btn-link text-decoration-none m-0 p-0 ${/iPhone|Android/i.test(navigator.userAgent) ? 'ms-3 mt-3' : 'me-4 mt-4'}" 
                                    data-bs-dismiss="modal" aria-label="Close">
                                <i class="${/iPhone|Android/i.test(navigator.userAgent) ? 'bi-chevron-left' : 'bi-x'}"></i>
                            </button>
                        </div>
                        <video id="video-src" class="object-fit-contain" muted autoplay controls></video>
                    </div>
                </div>
            </div>
        </div>
    `;

        // Voeg modal toe aan het body-element
        document.body.insertAdjacentHTML('beforeend', modalHtml);

        // Stel de video-bron in
        const videoSrc = document.getElementById("video-src");
        videoSrc.src = srcUrl;

        // Toon de modal
        const videoModal = new bootstrap.Modal(document.getElementById('video-modal'), {
            backdrop: 'static',
            keyboard: false,
            focus: true
        });
        videoModal.show();

        // Sluit de modal en verwijder het uit de DOM na het sluiten
        const modalElement = document.getElementById('video-modal');
        modalElement.addEventListener('hidden.bs.modal', function () {
            cesiumContainer.style.display = "none"; // Verberg de Cesium-container
            modalElement.remove(); // Verwijder modal uit DOM
        });
    }
</script>